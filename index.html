<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AR Erde</title>

  <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@ar-js-org/ar.js@latest/aframe/build/aframe-ar.min.js"></script>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header>
    <h1>AR Erde</h1>
  </header>

  <!-- üßë‚Äçüéì Name-Eingabe -->
  <div id="name-prompt" style="display: none; flex-direction: column; align-items: center; padding: 2rem;">
    <label for="user-name">Wie hei√üt du?</label>
    <input type="text" id="user-name" placeholder="Dein Vorname" />
    <button id="start-btn">Weiter</button>
  </div>

  <!-- ‚ùó CO‚ÇÇ-Tracker -->
  <div id="co2-indicator" style="display: none;">
    <svg viewBox="0 0 36 36" class="donut">
      <path class="donut-bg" d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
      <path id="donut-meter" class="donut-meter" stroke-dasharray="0, 100"
            d="M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831" />
      <text x="50%" y="50%" dy=".3em" class="co2-value" text-anchor="middle" dominant-baseline="middle">0 kg</text>
      <text x="50%" y="68%" dy=".3em" class="co2-max" text-anchor="middle" dominant-baseline="middle">/ 100 kg</text>
    </svg>
  </div>

  <!-- üå± Overlay -->
  <div id="input-overlay" style="display: none;">
    <div class="input-card">
      <div class="input-card-header">
        <h2>Deine Nachhaltigkeitsinfos</h2>
      </div>
      <div class="input-card-body"></div>
    </div>

    <div id="nav-buttons">
      <button id="prev-question">‚¨ÖÔ∏è</button>
      <button id="next-question">‚û°Ô∏è</button>
    </div>

    <div id="result-box" style="display: none;">
      <div id="summary-box" class="result-section"></div>
      <div id="equivalent-box" class="result-section"></div>
      <div id="trees-box" class="result-section"></div>
    </div>
  </div>

  <!-- üåê AR-Szene -->
  <a-scene embedded
           vr-mode-ui="enabled: false"
           arjs="detectionMode: mono; matrixCodeType: 3x3; trackingMethod: best;">
    <a-assets>
      <img id="arrow-icon" src="assets/arrow-down-white.png" />
      <a-asset-item id="earth-model" src="assets/earth.glb"></a-asset-item>
      <audio id="swipe-sound" src="assets/swipe.mp3" preload="auto"></audio>
    </a-assets>

    <a-marker preset="hiro">
      <a-entity id="earth-container">
        <a-entity id="earth"
                  gltf-model="#earth-model"
                  position="0 0 0"
                  scale="0.01 0.01 0.01"
                  animation__grow="property: scale; to: 1 1 1; dur: 2000; easing: easeOutElastic">
        </a-entity>
      </a-entity>

      <a-entity id="hint-text" position="0 2.5 -1" visible="true"
                text="value: W√ºrdest du das HSD-Klimaziel schaffen?\nDreh die Erde ‚Äì und finde es heraus.; align: center; color: white; width: 4;">
      </a-entity>
      <a-entity id="hint-bg"
                geometry="primitive: plane; height: auto; width: auto"
                position="0 2.5 -1.01"
                material="color: black; opacity: 0.4; transparent: true"
                visible="true">
      </a-entity>

      <a-entity id="arrow-icon-entity"
                geometry="primitive: plane; height: 0.9; width: 0.9"
                material="src: #arrow-icon; transparent: true; opacity: 0.8"
                position="0 1.7 -1"
                rotation="-90 0 0"
                animation="property: position; dir: alternate; dur: 1000; easing: easeInOutSine; loop: true; to: 0 2.0 -1"
                animation__fade="property: material.opacity; from: 0; to: 0.8; dur: 1200; delay: 1000;">
      </a-entity>
    </a-marker>

    <a-camera position="0 0 0" look-controls="enabled: false"
              cursor="rayOrigin: mouse" raycaster="objects: .clickable"></a-camera>
  </a-scene>

  <script type="module" src="scripts/main.js"></script>
</body>
</html>
